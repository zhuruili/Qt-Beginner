# 国际化

国际化（Internationalization，简写为I18N）的应用程序就是说要让该应用可以让各个国家的用户使用，说白了你得为你的应用程序提供翻译，让世界各地的人都能正常使用

>由于我手头上暂时并没有什么成熟的项目能够拿来做例子尝试，于是便采取写一则文档的方式来记录自己学到的有关国际化的相关内容

## Qt Linguist

Qt对应用程序的本地语言翻译提供了支持，可以使用**Qt Linguist**工具完成翻译工作。在编写Qt Widgets代码时，对需要在界面上显示的字符串一般会调用`tr()`函数，然后通过下面的步骤完成翻译：

1. 运行`lupdate`工具，从C++源码中提取要翻译的文本，会生成一个XML格式的.ts文件
2. 在`Qt Linguist`中打开.ts文件，并完成翻译工作
3. 运行`lrelease`工具，从.ts文件中获得.qm文件

Tip：.ts文件是供翻译人员使用的，而程序运行时只需要.qm文件，且这两个文件均与平台无关

## 使用Qt Creator自动生成翻译文件

上面讲述的那种完整的翻译过程略显繁杂，而使用`Qt Creator`创建应用程序并完成翻译工作会相对简单许多

创建项目后在`Translation File`翻译文件页面选择语言，将会自动生成.ts文件，自动配置项目的.pro文件使得在编译时自动使用`lrelease`生成.qm文件，并将.qm文件通过Qt资源系统内嵌到程序中

如果在一个应用程序中提供了多种语言，那么可以在程序启动时判断本地的语言环境，然后选择加载对应的.qm文件
